# üîî Sistema de Alarmes de Seguran√ßa

Um sistema moderno para gerenciamento de alarmes de incidentes de seguran√ßa, permitindo que analistas SOC possam cadastrar, listar e gerenciar alarmes de forma eficiente.


## üìã Sum√°rio

- [üöÄ Sobre o Projeto](#-sobre-o-projeto)
- [‚ú® Funcionalidades](#-funcionalidades)
- [üõ†Ô∏è Tecnologias Utilizadas](#Ô∏è-tecnologias-utilizadas)
- [üîß Instala√ß√£o e Execu√ß√£o](#-instala√ß√£o-e-execu√ß√£o)
  - [Pr√©-requisitos](#pr√©-requisitos)
  - [Passos para Instala√ß√£o](#passos-para-instala√ß√£o)
  - [Dados Iniciais e Seeders](#dados-iniciais-e-seeders)
  - [Cria√ß√£o de Usu√°rios](#cria√ß√£o-de-usu√°rios)
- [üìñ Guia do Usu√°rio](#-guia-do-usu√°rio)
  - [Login e Navega√ß√£o](#login-e-navega√ß√£o)
  - [Dashboard](#dashboard)
  - [Gerenciamento de Alarmes](#gerenciamento-de-alarmes)
  - [Tipos de Alarme](#tipos-de-alarme)
  - [Temas e Configura√ß√µes](#temas-e-configura√ß√µes)
- [üìù Estrutura do Projeto](#-estrutura-do-projeto)
- [üìö API Endpoints](#-api-endpoints)
- [üß™ Testes](#-testes)
- [üë• Autores](#-autores)

## üöÄ Sobre o Projeto

O Sistema de Alarmes de Seguran√ßa foi desenvolvido para atender √†s necessidades de equipes de seguran√ßa da informa√ß√£o, permitindo uma rea√ß√£o r√°pida a incidentes. A plataforma oferece uma interface intuitiva para gerenciar alarmes, com recursos de filtragem, categoriza√ß√£o por criticidade e acompanhamento de status.

## ‚ú® Funcionalidades

- **Autentica√ß√£o Segura**: Sistema de login com e-mail e senha
- **Gerenciamento de Alarmes**: CRUD completo seguindo as regras de neg√≥cio
- **Listagem Avan√ßada**: Pagina√ß√£o, ordena√ß√£o e filtros por todos os campos
- **Dashboard Anal√≠tico**: Visualiza√ß√£o de estat√≠sticas e m√©tricas importantes
- **Theme Switcher**: Suporte a modo claro e escuro
- **Containeriza√ß√£o**: Ambiente completo em Docker para f√°cil configura√ß√£o

## üõ†Ô∏è Tecnologias Utilizadas

### Backend
- Laravel 12
- PHP 8.3
- MySQL 8
- PHPUnit para testes
- Redis para filas

### Frontend
- React 19
- Vite
- Redux para gerenciamento de estado
- Tailwind CSS para estiliza√ß√£o
- Chart.js para visualiza√ß√µes gr√°ficas

### Infraestrutura
- Docker e docker-compose
- Nginx como servidor web


### MVP (Requisitos Obrigat√≥rios)
- ‚úÖ Login (Autentica√ß√£o com e-mail e senha)
- ‚úÖ CRUD de Alarmes completo
- ‚úÖ Listagem com pagina√ß√£o, ordena√ß√£o e filtros
- ‚úÖ Docker (ambiente completo via docker-compose)
- ‚úÖ Testes Unit√°rios (cobertura de 100%)
- ‚úÖ Redux para gerenciamento de estado

### Regras de Neg√≥cio
- ‚úÖ Criticidade (0=info, 1=baixo, 2=m√©dio, 3=alto, 4=cr√≠tico)
- ‚úÖ Status (1=aberto, 2=em andamento, 0=fechado)
- ‚úÖ Ativo (1=ativo, 0=desativado)
- ‚úÖ Soft-delete (apenas se status=1)
- ‚úÖ Datas imut√°veis (data_ocorrencia e created_at)
- ‚úÖ Tipos de Alarme din√¢micos


## üîß Instala√ß√£o e Execu√ß√£o

### Pr√©-requisitos
- Docker e docker-compose instalados
- Git
- M√≠nimo 4GB de RAM dispon√≠vel
- Portas 5173, 8000, 3306 e 6379 livres no sistema

### Passos para Instala√ß√£o

1. Clone o reposit√≥rio:
```bash
git clone https://github.com/seu-usuario/redbelt-test.git
cd redbelt-test
```

2. Configure o ambiente:
```bash
# Crie os arquivos de ambiente para backend e frontend
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env
```

3. Execute o script de instala√ß√£o (automatiza todo o processo):
```bash
bash install.sh
```

OU siga manualmente os passos:

```bash
# Inicie os containers
docker-compose up -d

# Execute as migra√ß√µes e seeders do banco de dados
docker exec redbelt-backend php artisan migrate --seed

# Gere a chave da aplica√ß√£o Laravel
docker exec redbelt-backend php artisan key:generate

# Limpe os caches
docker exec redbelt-backend php artisan cache:clear
docker exec redbelt-backend php artisan config:clear

# Gere os assets do frontend
docker exec redbelt-frontend npm run build
```

4. Acesse a aplica√ß√£o:
```
Frontend: http://localhost:5173
Backend API: http://localhost:8000
```

### Dados Iniciais e Seeders

O sistema vem pr√©-configurado com dados iniciais para facilitar os testes. Ao executar o comando `php artisan migrate --seed`, os seguintes dados s√£o criados:

#### Usu√°rios de Teste
| E-mail | Senha | Perfil |
|--------|-------|--------|
| admin@example.com | password | Administrador |
| user@example.com | password | Usu√°rio |

#### Tipos de Alarme Padr√£o
Os seguintes tipos de alarme s√£o criados automaticamente:
- Malware Detectado
- Tentativa de Invas√£o
- Atividade Suspeita
- Falha de Autentica√ß√£o
- Acesso N√£o Autorizado

#### Alarmes de Exemplo
S√£o criados 20 alarmes de exemplo com diferentes criticidades, status e tipos para demonstrar o funcionamento do sistema.

Para verificar os detalhes dos seeders, veja os arquivos:
- `backend/database/seeders/UserSeeder.php` - Para usu√°rios
- `backend/database/seeders/TipoAlarmeSeeder.php` - Para tipos de alarme
- `backend/database/seeders/AlarmeSeeder.php` - Para alarmes de exemplo

### Cria√ß√£o de Usu√°rios

#### Via Interface (Frontend)
1. Acesse a p√°gina de registro em `http://localhost:5173/register`
2. Preencha os campos:
   - **Nome**: Nome completo
   - **E-mail**: Endere√ßo de e-mail v√°lido
   - **Senha**: M√≠nimo 8 caracteres
   - **Confirmar Senha**: Repita a senha
3. Clique em "Registrar"

#### Via CLI (Terminal)
```bash
# Acesse o container do backend
docker exec -it redbelt-backend bash

# Execute o comando Artisan para criar um usu√°rio
php artisan user:create
```

Siga as instru√ß√µes interativas para inserir o nome, e-mail e senha do novo usu√°rio.

#### Via Tinker (Laravel Console)
```bash
# Acesse o container do backend
docker exec -it redbelt-backend bash

# Inicie o Tinker
php artisan tinker

# Crie um novo usu√°rio
\App\Models\User::create([
    'name' => 'Nome do Usu√°rio',
    'email' => 'email@exemplo.com',
    'password' => bcrypt('senha123'),
]);
```

## üìñ Guia do Usu√°rio

### Login e Navega√ß√£o

1. **Acesso ao Sistema**:
   - Abra seu navegador e acesse `http://localhost:5173`
   - Na tela de login, insira seu e-mail e senha
   - Clique em "Entrar" para acessar o sistema

2. **Navega√ß√£o Principal**:
   - O menu lateral permite acesso r√°pido √†s principais funcionalidades:
     - **Dashboard**: Visualiza√ß√£o geral com estat√≠sticas
     - **Alarmes**: Lista e gerenciamento de alarmes
     - **Tipos de Alarme**: Gerenciamento de categorias de alarmes
   - No canto superior direito, voc√™ encontra:
     - Alternador de tema (claro/escuro)
     - Menu do usu√°rio (perfil e logout)

### Dashboard

O Dashboard apresenta uma vis√£o geral do sistema com gr√°ficos e estat√≠sticas importantes:

1. **Cart√µes de Resumo**:
   - Total de alarmes por status (Aberto, Em andamento, Fechado)
   - Distribui√ß√£o por criticidade
   - Alarmes recentes

2. **Visualiza√ß√µes Gr√°ficas**:
   - **Gr√°fico de Rosca**: Distribui√ß√£o de alarmes por tipo
   - **Gr√°fico de Barras**: Alarmes por criticidade
   - **Gr√°fico de Barras**: Alarmes por status

3. **Lista de √öltimos Alarmes**:
   - Mostra os alarmes mais recentes com links diretos para detalhes

### Gerenciamento de Alarmes

#### Listar Alarmes

1. Acesse a se√ß√£o **Alarmes** no menu lateral
2. A lista de alarmes apresenta:
   - ID, t√≠tulo, tipo, status, criticidade e estado (ativo/inativo)
   - √çcones para editar e excluir cada registro
   - Destaque visual por criticidade e status (cores diferentes)

3. **Filtros dispon√≠veis**:
   - **Status**: Filtre por Aberto, Em andamento ou Fechado
   - **Criticidade**: Filtre por Info, Baixo, M√©dio, Alto ou Cr√≠tico
   - **Tipo de Alarme**: Selecione um tipo espec√≠fico
   - **Pesquisa**: Busque por t√≠tulo ou descri√ß√£o

4. **Pagina√ß√£o**:
   - Navegue entre p√°ginas usando os bot√µes de pagina√ß√£o
   - Altere o n√∫mero de itens por p√°gina (10, 25, 50)

#### Cadastrar Novo Alarme

1. Na tela de Alarmes, clique no bot√£o **Novo Alarme**
2. Preencha o formul√°rio com os dados do alarme:
   - **Nome do Alarme**: T√≠tulo descritivo do incidente
   - **Tipo de Alarme**: Selecione um tipo existente ou crie um novo
   - **Descri√ß√£o**: Detalhes do incidente
   - **Criticidade**: Selecione entre Informa√ß√£o, Baixo, M√©dio, Alto ou Cr√≠tico
   - **Status**: Aberto, Em andamento ou Fechado
   - **Data de Ocorr√™ncia**: Data e hora do incidente
   - **Ativo**: Marque para manter o alarme ativo

3. Clique em **Salvar** para cadastrar o alarme

#### Editar Alarme

1. Na lista de alarmes, clique no √≠cone de edi√ß√£o (l√°pis) do alarme desejado
2. Atualize os campos necess√°rios no formul√°rio
   - **Importante**: A data de ocorr√™ncia n√£o pode ser alterada ap√≥s a cria√ß√£o
3. Clique em **Salvar** para confirmar as altera√ß√µes

#### Excluir Alarme

1. Na lista de alarmes, clique no √≠cone de exclus√£o (lixeira)
2. Confirme a exclus√£o na caixa de di√°logo
   - **Nota**: Apenas alarmes com status "Aberto" podem ser exclu√≠dos

### Tipos de Alarme

Os tipos de alarme s√£o categorias que podem ser personalizadas para classificar os incidentes.

#### Listar Tipos de Alarme

1. Acesse a se√ß√£o **Tipos de Alarme** no menu lateral
2. A lista exibe todos os tipos cadastrados com ID, nome e a√ß√µes dispon√≠veis

#### Cadastrar Novo Tipo

1. Na tela de Tipos de Alarme, clique no bot√£o **Novo Tipo**
2. Preencha o nome do novo tipo de alarme
3. Clique em **Salvar**

#### Editar Tipo de Alarme

1. Na lista de tipos, clique no √≠cone de edi√ß√£o (l√°pis)
2. Atualize o nome do tipo
3. Clique em **Salvar**

#### Excluir Tipo de Alarme

1. Na lista de tipos, clique no √≠cone de exclus√£o (lixeira)
2. Confirme a exclus√£o na caixa de di√°logo
   - **Importante**: Tipos associados a alarmes existentes n√£o podem ser exclu√≠dos

### Temas e Configura√ß√µes

1. **Alternar Tema**:
   - Clique no √≠cone de sol/lua no canto superior direito da interface
   - O sistema alterna entre tema claro e escuro
   - A prefer√™ncia de tema √© salva e mantida entre sess√µes

2. **Logout**:
   - Clique no menu de usu√°rio no canto superior direito
   - Selecione "Sair" para encerrar a sess√£o

## üìù Estrutura do Projeto

```
redbelt-test/
‚îú‚îÄ‚îÄ backend/            # API Laravel
‚îÇ   ‚îú‚îÄ‚îÄ app/            # C√≥digo da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Http/       # Controllers, Middleware, Requests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Models/     # Modelos da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Services/   # Servi√ßos da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ database/       # Migrations, seeds e factories
‚îÇ   ‚îú‚îÄ‚îÄ routes/         # Defini√ß√£o de rotas da API
‚îÇ   ‚îú‚îÄ‚îÄ tests/          # Testes unit√°rios e de integra√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ frontend/           # Aplica√ß√£o React
‚îÇ   ‚îú‚îÄ‚îÄ src/            # C√≥digo fonte
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/ # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/      # P√°ginas da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redux/      # Configura√ß√£o do Redux
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/   # Servi√ßos de API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docker/             # Configura√ß√µes do Docker
‚îú‚îÄ‚îÄ docker-compose.yml  # Defini√ß√£o dos servi√ßos
‚îî‚îÄ‚îÄ README.md           # Este arquivo
```

## üìö API Endpoints

### Autentica√ß√£o
- `POST /api/auth/login` - Login de usu√°rio
- `POST /api/auth/logout` - Logout de usu√°rio
- `POST /api/auth/register` - Registro de novo usu√°rio

### Alarmes
- `GET /api/alarmes` - Listar alarmes (com suporte a filtros)
- `GET /api/alarmes/{id}` - Obter detalhes de um alarme
- `POST /api/alarmes` - Criar um novo alarme
- `PUT /api/alarmes/{id}` - Atualizar um alarme existente
- `DELETE /api/alarmes/{id}` - Excluir um alarme (soft-delete)

### Tipos de Alarme
- `GET /api/tipos-alarme` - Listar tipos de alarme
- `POST /api/tipos-alarme` - Criar um novo tipo de alarme
- `PUT /api/tipos-alarme/{id}` - Atualizar um tipo de alarme
- `DELETE /api/tipos-alarme/{id}` - Excluir um tipo de alarme

### Estat√≠sticas
- `GET /api/stats/alarmes` - Estat√≠sticas gerais de alarmes

## üß™ Testes

O projeto inclui testes unit√°rios e de integra√ß√£o para garantir a qualidade do c√≥digo.

### Executando os testes
```bash
# Acesse o container do backend
docker exec -it redbelt-backend bash

# Execute os testes
php artisan test

# Para visualizar a cobertura de testes (requer PHPUnit com XDebug)
XDEBUG_MODE=coverage php artisan test --coverage
```

### Cobertura de testes
Os testes cobrem:
- Autentica√ß√£o (login, logout, registro)
- CRUD de Alarmes
- CRUD de Tipos de Alarme
- Valida√ß√µes de dados
- Regras de neg√≥cio espec√≠ficas
